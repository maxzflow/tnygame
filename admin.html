<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå - Zifo Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { background-color: #1e1e1e; color: #fff; font-family: 'Kanit', sans-serif; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { color: #c49a6c; text-align: center; margin-bottom: 30px; }
        
        .game-section {
            background: #2d2d2d;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #444;
        }
        .game-section h3 { color: #c49a6c; margin-top: 0; border-bottom: 1px solid #555; padding-bottom: 10px; }
        
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        input { 
            background: #444; border: 1px solid #555; color: #fff; 
            padding: 10px; border-radius: 5px; width: 100%; box-sizing: border-box; 
            font-family: 'Kanit', sans-serif;
        }
        input:focus { border-color: #c49a6c; outline: none; background: #555; }
        
        .btn-save {
            background: #28a745; color: white; border: none; padding: 15px; 
            width: 100%; font-size: 1.2rem; border-radius: 8px; cursor: pointer; 
            font-family: 'Kanit', sans-serif; margin-top: 20px;
            transition: 0.3s;
        }
        .btn-save:hover { background: #218838; transform: scale(1.02); }
        .loading { text-align: center; color: #888; margin-top: 50px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚öôÔ∏è ‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå (3 ‡πÄ‡∏Å‡∏°)</h1>
        <div id="editor-area">
            <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
        </div>
        <button class="btn-save" onclick="saveData()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á</button>
    </div>

    <script>
        // 1. ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á
        fetch('api.php')
            .then(res => res.json())
            .then(data => {
                const area = document.getElementById('editor-area');
                area.innerHTML = '';
                
                // ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å 3 ‡∏ä‡∏∏‡∏î (‡πÄ‡∏Å‡∏° 1-3)
                for(let i=0; i<3; i++) {
                    const words = data[i] || Array(9).fill("");
                    
                    let html = `
                        <div class="game-section">
                            <h3>‡πÄ‡∏Å‡∏°‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà ${i+1}</h3>
                            <div class="grid">
                    `;
                    
                    words.forEach((word, idx) => {
                        html += `<input type="text" id="g${i}-w${idx}" value="${word}" placeholder="‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà ${idx+1}">`;
                    });
                    
                    html += `</div></div>`;
                    area.innerHTML += html;
                }
            })
            .catch(err => alert('‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Database ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏ä‡πá‡∏Ñ‡πÑ‡∏ü‡∏•‡πå db.php'));

        // 2. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        function saveData() {
            const payload = [];
            for(let i=0; i<3; i++) {
                const roundWords = [];
                for(let j=0; j<9; j++) {
                    const val = document.getElementById(`g${i}-w${j}`).value;
                    roundWords.push(val);
                }
                payload.push(roundWords);
            }

            fetch('api.php', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(payload)
            })
            .then(res => res.json())
            .then(data => {
                alert(data.message);
            })
            .catch(err => alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å'));
        }
    </script>
</body>
</html>
